<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Visor de Imágenes Simple con PyGTK | El Blog de Marcelo!</title>
<meta name="keywords" content="">
<meta name="description" content="Dado que alguien me pidió vía twitter un ejemplo de cómo hacer un zoom de una imagen en PyGTK, hice este ejemplito sencillo que sólo carga una imagen en un widget Gtk.Image.
Maneja el movimiento de la imagen con el mouse, las teclas del cursor y hace zoom con F1 (&ldquo;0 o adaptar a ventana&rdquo;), F2 (&#43;25%), F3 (&#43;50%), F4(&#43;75%) y F5(&quot;%&#43;100 o 1:1&quot;).
#!/usr/bin/env python
# -*- coding: utf-8 -*-

&#34;&#34;&#34;
    SimpleImageViewer - Visor simple de imágenes, de ejemplo, que utiliza PyGTK.
    Marcelo Fidel Fernández - http://www.marcelofernandez.info

    Licencia: BSD. Disponible en: http://www.freebsd.org/copyright/license.html

    TODO:
        * Dar la opción de usar el scroll del mouse para hacer zoom.
        * Mejorar el código y peformance (quizás).
&#34;&#34;&#34;

import os
import sys
import pygtk
pygtk.require(&#39;2.0&#39;)
import gtk

# Variables globales para el ejemplo; podrían ir en un archivo de configuración,
# como por ejemplo &#39;config.py&#39; e importarlo.
# Mapeo de teclas - Ver constantes en el modulo gtk.keysyms
import gtk.keysyms as kb

# Estructura: teclas (en mayúscula, contempla minúsculas también)
# (offset_X_pixeles, offset_Y_pixeles)
OFFSET_GRAL = 50
MOVE_KEYS = { kb.Up : (0, -OFFSET_GRAL), # Arriba
              kb.Down : (0,  OFFSET_GRAL), # Abajo
              kb.Right : (OFFSET_GRAL, 0),  # Derecha
              kb.Left : (-OFFSET_GRAL, 0), # Izquierda
            }

# Estructura: tecla: nivel de zoom (zoom_ratio)
ZOOM_KEYS = { kb.F1: 0.0,
              kb.F2: 25.0,
              kb.F3: 50.0,
              kb.F4: 75.0,
              kb.F5: 100.0,
            }

DEFAULT_IMAGE = &#39;/usr/share/backgrounds/Cherries.jpg&#39;

class SimpleImageViewer:

    def __init__(self, image_file):
        self.window = gtk.Window(gtk.WINDOW_TOPLEVEL)
        self.window.connect(&#34;delete_event&#34;, self.close_application)
        self.window.set_position(gtk.WIN_POS_CENTER_ALWAYS)
        self.window.set_default_size(800, 600)

        self.pixbuf = gtk.gdk.pixbuf_new_from_file(image_file)
        self.ancho_pixbuf = float(self.pixbuf.get_width())
        self.alto_pixbuf = float(self.pixbuf.get_height())
        self.image = gtk.Image()
        self.image.set_from_pixbuf(self.pixbuf)

        self.viewport = gtk.Viewport()
        # No están por defecto, los agrego
        self.viewport.add_events(gtk.gdk.BUTTON_RELEASE_MASK | gtk.gdk.BUTTON1_MOTION_MASK)
        self.viewport.connect(&#39;button-press-event&#39;, self.on_button_pressed)
        self.viewport.connect(&#39;button-release-event&#39;, self.on_button_released)
        self.viewport.connect(&#39;motion-notify-event&#39;, self.on_mouse_moved)
        # Lo conecto a la ventana, ya que siempre tiene el foco
        self.window.connect(&#39;key-press-event&#39;, self.on_key_press)

        self.viewport.add(self.image)
        self.scrolled_wnd = gtk.ScrolledWindow()
        self.scrolled_wnd.add(self.viewport)
        self.window.add(self.scrolled_wnd)
        self.window.show_all()

    def _update_image(self, zoom_ratio):
        &#34;&#34;&#34; Updates the image in the widget according to the zoom_ratio
            Actualiza la imagen en el widget Image con el zoom_ratio de parámetro
        &#34;&#34;&#34;
        # TODO: Prioriza que encaje el ancho por sobre el alto de la imagen
        # al estar maximizado. Mejorar.

        # Obtengo las dimensiones actuales del viewport
        rect = self.viewport.get_allocation()
        # Resize de la imagen conservando las proporciones de la imagen
        if self.ancho_pixbuf &gt; self.alto_pixbuf:
            base = self.ancho_pixbuf - rect.width
            ancho = int(rect.width &#43; (base * (zoom_ratio/100)))
            relacion = (self.alto_pixbuf*100)/self.ancho_pixbuf
            alto = int(ancho * relacion/100)
        else:
            base = self.alto_pixbuf - rect.height
            alto = int(rect.height &#43; (base * (zoom_ratio/100)))
            relacion = (self.ancho_pixbuf*100)/self.alto_pixbuf
            ancho = int(alto * (relacion/100))

        scaled_buf = self.pixbuf.scale_simple(ancho, alto, gtk.gdk.INTERP_BILINEAR)
        self.image.set_from_pixbuf(scaled_buf)

    def _move_image(self, offset_x, offset_y):
        &#34;&#34;&#34; Moves the image inside the viewport to the specified offset (&#43; or - pixels)
            Mueve/Desplaza la imagen del viewport según el offset que se le especifique
        &#34;&#34;&#34;
        vport = self.viewport
        xadjust = vport.props.hadjustment
        newx = xadjust.value &#43; offset_x
        yadjust = vport.props.vadjustment
        newy = yadjust.value &#43; offset_y
        # Si las cosas están dentro de los bordes, seteo
        if (newx &gt;= xadjust.lower) and \
               (newx &lt;= (xadjust.upper - xadjust.page_size)):
            xadjust.value = newx
            vport.set_hadjustment(xadjust)
        if (newy &gt;= yadjust.lower) and \
               (newy &lt;= (yadjust.upper - yadjust.page_size)):
            yadjust.value = newy
            vport.set_vadjustment(yadjust)

    def on_key_press(self, widget, event):
        &#34;&#34;&#34; Callback to handle the keys pressed in the main window
            Callback que maneja las teclas que se presionan en la ventana
        &#34;&#34;&#34;
        keycode = gtk.gdk.keyval_to_upper(event.keyval)
        newx = newy = 0
        if keycode in MOVE_KEYS.keys():
            offset_x, offset_y = MOVE_KEYS[keycode]
            self._move_image(offset_x, offset_y)
        elif keycode in ZOOM_KEYS.keys():
            self._update_image(ZOOM_KEYS[keycode])
        else:
            return False
        return True # Con True cancelo el evento

    def on_mouse_moved(self, widget, event):
        &#34;&#34;&#34; Callback to the mouse movement inside the viewport
            Callback que es llamado cuando el mouse se mueve en el viewport
        &#34;&#34;&#34;
        # Ver: http://www.pygtk.org/pygtk2tutorial-es/sec-EventHandling.html
        if event.is_hint:
            x, y, state = event.window.get_pointer()
        else:
            state = event.state
        x, y = event.x_root, event.y_root
        if state &amp; gtk.gdk.BUTTON1_MASK:
            offset_x = self.prevmousex - x
            offset_y = self.prevmousey - y
            self._move_image(offset_x, offset_y)
        self.prevmousex = x
        self.prevmousey = y

    def on_button_pressed(self, widget, event):
        &#34;&#34;&#34; When the user presses the left mouse button, save the x and y pixel positions,
            and change the cursor.
            Cuando el usuario presiona el botón izquierdo, guardo los puntos x, y de
            origen del evento y cambio el cursor a &#34;moviéndose&#34;.
        &#34;&#34;&#34;
        if event.button == 1:
            self.change_vport_cursor(gtk.gdk.Cursor(gtk.gdk.FLEUR))
            self.prevmousex = event.x_root
            self.prevmousey = event.y_root
        return True

    def on_button_released(self, widget, event):
        &#34;&#34;&#34; When the user releases the left mouse button, set the normal cursor.
            Cuando el usuario suelta el botón izquierdo, vuelvo el cursor al normal &#34;&#34;&#34;
        if event.button == 1:
            self.change_vport_cursor(None)
        return True

    def change_vport_cursor(self, type):
        self.viewport.window.set_cursor(type)

    def close_application(self, widget, event, data=None):
        gtk.main_quit()
        return False

if __name__ == &#34;__main__&#34;:
    if len(sys.argv) &gt; 1 and os.path.exists(sys.argv[1]):
        image_file = sys.argv[1]
    else:
        image_file = DEFAULT_IMAGE
    SimpleImageViewer(image_file)
    gtk.main()
Queda pendiente manejar el scroll del mouse para hacer zoom (ya que GTK mueve el gtk.Scrollwindow que contiene la imagen por defecto). Si bien funciona copiando y pegando esto en un archivo, también pueden descargar el ejemplo desde acá.">
<meta name="author" content="mfernandez">
<link rel="canonical" href="http://localhost:1313/2009/11/visor-de-imagenes-simple-con-pygtk/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.6330bae568fb8548cd5ae396c8d8ff700d4fc0f161c35971ab47e9c5bf9a2e17.css" integrity="sha256-YzC65Wj7hUjNWuOWyNj/cA1PwPFhw1lxq0fpxb&#43;aLhc=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/2009/11/visor-de-imagenes-simple-con-pygtk/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lexend&display=swap" rel="stylesheet">

</head>

<body class="" id="top">
<script>
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="El Blog de Marcelo! (Alt + H)">El Blog de Marcelo!</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="">
                    <span></span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/" title="Inicio">
                    <span>Inicio</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/charlas/" title="Charlas">
                    <span>Charlas</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/proyectos/" title="Proyectos">
                    <span>Proyectos</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/publicaciones/" title="Publicaciones">
                    <span>Publicaciones</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/sobre-mi/" title="Sobre Mí">
                    <span>Sobre Mí</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about-me/" title="About Me">
                    <span>About Me</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="🔍">
                    <span>🔍</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Visor de Imágenes Simple con PyGTK
    </h1>
    <div class="post-meta"><span title='2009-11-16 15:00:57 +0000 +0000'>November 16, 2009</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;mfernandez

</div>
  </header> 
  <div class="post-content"><p>Dado que alguien me pidió vía twitter un ejemplo de cómo hacer un zoom de una imagen en PyGTK, hice este ejemplito sencillo que sólo carga una imagen en un widget Gtk.Image.</p>
<p>Maneja el movimiento de la imagen con el mouse, las teclas del cursor y hace zoom con F1 (&ldquo;0 o adaptar a ventana&rdquo;), F2 (+25%), F3 (+50%), F4(+75%) y F5(&quot;%+100 o 1:1&quot;).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span><span style="color:#75715e">#!/usr/bin/env python</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -*- coding: utf-8 -*-</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    SimpleImageViewer - Visor simple de imágenes, de ejemplo, que utiliza PyGTK.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    Marcelo Fidel Fernández - http://www.marcelofernandez.info
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    Licencia: BSD. Disponible en: http://www.freebsd.org/copyright/license.html
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    TODO:
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        * Dar la opción de usar el scroll del mouse para hacer zoom.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        * Mejorar el código y peformance (quizás).
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>import os
</span></span><span style="display:flex;"><span>import sys
</span></span><span style="display:flex;"><span>import pygtk
</span></span><span style="display:flex;"><span>pygtk<span style="color:#f92672">.</span>require(<span style="color:#e6db74">&#39;2.0&#39;</span>)
</span></span><span style="display:flex;"><span>import gtk
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Variables globales para el ejemplo; podrían ir en un archivo de configuración,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># como por ejemplo &#39;config.py&#39; e importarlo.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Mapeo de teclas - Ver constantes en el modulo gtk.keysyms</span>
</span></span><span style="display:flex;"><span>import gtk<span style="color:#f92672">.</span>keysyms as kb
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Estructura: teclas (en mayúscula, contempla minúsculas también)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># (offset_X_pixeles, offset_Y_pixeles)</span>
</span></span><span style="display:flex;"><span>OFFSET_GRAL <span style="color:#f92672">=</span> <span style="color:#ae81ff">50</span>
</span></span><span style="display:flex;"><span>MOVE_KEYS <span style="color:#f92672">=</span> { kb<span style="color:#f92672">.</span>Up : (<span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span>OFFSET_GRAL), <span style="color:#75715e"># Arriba</span>
</span></span><span style="display:flex;"><span>              kb<span style="color:#f92672">.</span>Down : (<span style="color:#ae81ff">0</span>,  OFFSET_GRAL), <span style="color:#75715e"># Abajo</span>
</span></span><span style="display:flex;"><span>              kb<span style="color:#f92672">.</span>Right : (OFFSET_GRAL, <span style="color:#ae81ff">0</span>),  <span style="color:#75715e"># Derecha</span>
</span></span><span style="display:flex;"><span>              kb<span style="color:#f92672">.</span>Left : (<span style="color:#f92672">-</span>OFFSET_GRAL, <span style="color:#ae81ff">0</span>), <span style="color:#75715e"># Izquierda</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Estructura: tecla: nivel de zoom (zoom_ratio)</span>
</span></span><span style="display:flex;"><span>ZOOM_KEYS <span style="color:#f92672">=</span> { kb<span style="color:#f92672">.</span>F1: <span style="color:#ae81ff">0.0</span>,
</span></span><span style="display:flex;"><span>              kb<span style="color:#f92672">.</span>F2: <span style="color:#ae81ff">25.0</span>,
</span></span><span style="display:flex;"><span>              kb<span style="color:#f92672">.</span>F3: <span style="color:#ae81ff">50.0</span>,
</span></span><span style="display:flex;"><span>              kb<span style="color:#f92672">.</span>F4: <span style="color:#ae81ff">75.0</span>,
</span></span><span style="display:flex;"><span>              kb<span style="color:#f92672">.</span>F5: <span style="color:#ae81ff">100.0</span>,
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>DEFAULT_IMAGE <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/usr/share/backgrounds/Cherries.jpg&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> SimpleImageViewer:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">__init__</span>(self, image_file):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>window <span style="color:#f92672">=</span> gtk<span style="color:#f92672">.</span>Window(gtk<span style="color:#f92672">.</span>WINDOW_TOPLEVEL)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>window<span style="color:#f92672">.</span>connect(<span style="color:#e6db74">&#34;delete_event&#34;</span>, self<span style="color:#f92672">.</span>close_application)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>window<span style="color:#f92672">.</span>set_position(gtk<span style="color:#f92672">.</span>WIN_POS_CENTER_ALWAYS)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>window<span style="color:#f92672">.</span>set_default_size(<span style="color:#ae81ff">800</span>, <span style="color:#ae81ff">600</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>pixbuf <span style="color:#f92672">=</span> gtk<span style="color:#f92672">.</span>gdk<span style="color:#f92672">.</span>pixbuf_new_from_file(image_file)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>ancho_pixbuf <span style="color:#f92672">=</span> <span style="color:#a6e22e">float</span>(self<span style="color:#f92672">.</span>pixbuf<span style="color:#f92672">.</span>get_width())
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>alto_pixbuf <span style="color:#f92672">=</span> <span style="color:#a6e22e">float</span>(self<span style="color:#f92672">.</span>pixbuf<span style="color:#f92672">.</span>get_height())
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>image <span style="color:#f92672">=</span> gtk<span style="color:#f92672">.</span>Image()
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>image<span style="color:#f92672">.</span>set_from_pixbuf(self<span style="color:#f92672">.</span>pixbuf)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>viewport <span style="color:#f92672">=</span> gtk<span style="color:#f92672">.</span>Viewport()
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># No están por defecto, los agrego</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>viewport<span style="color:#f92672">.</span>add_events(gtk<span style="color:#f92672">.</span>gdk<span style="color:#f92672">.</span>BUTTON_RELEASE_MASK <span style="color:#f92672">|</span> gtk<span style="color:#f92672">.</span>gdk<span style="color:#f92672">.</span>BUTTON1_MOTION_MASK)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>viewport<span style="color:#f92672">.</span>connect(<span style="color:#e6db74">&#39;button-press-event&#39;</span>, self<span style="color:#f92672">.</span>on_button_pressed)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>viewport<span style="color:#f92672">.</span>connect(<span style="color:#e6db74">&#39;button-release-event&#39;</span>, self<span style="color:#f92672">.</span>on_button_released)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>viewport<span style="color:#f92672">.</span>connect(<span style="color:#e6db74">&#39;motion-notify-event&#39;</span>, self<span style="color:#f92672">.</span>on_mouse_moved)
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Lo conecto a la ventana, ya que siempre tiene el foco</span>
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>window<span style="color:#f92672">.</span>connect(<span style="color:#e6db74">&#39;key-press-event&#39;</span>, self<span style="color:#f92672">.</span>on_key_press)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>viewport<span style="color:#f92672">.</span>add(self<span style="color:#f92672">.</span>image)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>scrolled_wnd <span style="color:#f92672">=</span> gtk<span style="color:#f92672">.</span>ScrolledWindow()
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>scrolled_wnd<span style="color:#f92672">.</span>add(self<span style="color:#f92672">.</span>viewport)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>window<span style="color:#f92672">.</span>add(self<span style="color:#f92672">.</span>scrolled_wnd)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>window<span style="color:#f92672">.</span>show_all()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_update_image</span>(self, zoom_ratio):
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;&#34;&#34; Updates the image in the widget according to the zoom_ratio
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            Actualiza la imagen en el widget Image con el zoom_ratio de parámetro
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># TODO: Prioriza que encaje el ancho por sobre el alto de la imagen</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># al estar maximizado. Mejorar.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Obtengo las dimensiones actuales del viewport</span>
</span></span><span style="display:flex;"><span>        rect <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>viewport<span style="color:#f92672">.</span>get_allocation()
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Resize de la imagen conservando las proporciones de la imagen</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>ancho_pixbuf <span style="color:#f92672">&gt;</span> self<span style="color:#f92672">.</span>alto_pixbuf:
</span></span><span style="display:flex;"><span>            base <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>ancho_pixbuf <span style="color:#f92672">-</span> rect<span style="color:#f92672">.</span>width
</span></span><span style="display:flex;"><span>            ancho <span style="color:#f92672">=</span> <span style="color:#a6e22e">int</span>(rect<span style="color:#f92672">.</span>width <span style="color:#f92672">+</span> (base <span style="color:#f92672">*</span> (zoom_ratio<span style="color:#f92672">/</span><span style="color:#ae81ff">100</span>)))
</span></span><span style="display:flex;"><span>            relacion <span style="color:#f92672">=</span> (self<span style="color:#f92672">.</span>alto_pixbuf<span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>)<span style="color:#f92672">/</span>self<span style="color:#f92672">.</span>ancho_pixbuf
</span></span><span style="display:flex;"><span>            alto <span style="color:#f92672">=</span> <span style="color:#a6e22e">int</span>(ancho <span style="color:#f92672">*</span> relacion<span style="color:#f92672">/</span><span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            base <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>alto_pixbuf <span style="color:#f92672">-</span> rect<span style="color:#f92672">.</span>height
</span></span><span style="display:flex;"><span>            alto <span style="color:#f92672">=</span> <span style="color:#a6e22e">int</span>(rect<span style="color:#f92672">.</span>height <span style="color:#f92672">+</span> (base <span style="color:#f92672">*</span> (zoom_ratio<span style="color:#f92672">/</span><span style="color:#ae81ff">100</span>)))
</span></span><span style="display:flex;"><span>            relacion <span style="color:#f92672">=</span> (self<span style="color:#f92672">.</span>ancho_pixbuf<span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>)<span style="color:#f92672">/</span>self<span style="color:#f92672">.</span>alto_pixbuf
</span></span><span style="display:flex;"><span>            ancho <span style="color:#f92672">=</span> <span style="color:#a6e22e">int</span>(alto <span style="color:#f92672">*</span> (relacion<span style="color:#f92672">/</span><span style="color:#ae81ff">100</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        scaled_buf <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>pixbuf<span style="color:#f92672">.</span>scale_simple(ancho, alto, gtk<span style="color:#f92672">.</span>gdk<span style="color:#f92672">.</span>INTERP_BILINEAR)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>image<span style="color:#f92672">.</span>set_from_pixbuf(scaled_buf)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">_move_image</span>(self, offset_x, offset_y):
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;&#34;&#34; Moves the image inside the viewport to the specified offset (+ or - pixels)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            Mueve/Desplaza la imagen del viewport según el offset que se le especifique
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>        vport <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>viewport
</span></span><span style="display:flex;"><span>        xadjust <span style="color:#f92672">=</span> vport<span style="color:#f92672">.</span>props<span style="color:#f92672">.</span>hadjustment
</span></span><span style="display:flex;"><span>        newx <span style="color:#f92672">=</span> xadjust<span style="color:#f92672">.</span>value <span style="color:#f92672">+</span> offset_x
</span></span><span style="display:flex;"><span>        yadjust <span style="color:#f92672">=</span> vport<span style="color:#f92672">.</span>props<span style="color:#f92672">.</span>vadjustment
</span></span><span style="display:flex;"><span>        newy <span style="color:#f92672">=</span> yadjust<span style="color:#f92672">.</span>value <span style="color:#f92672">+</span> offset_y
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Si las cosas están dentro de los bordes, seteo</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (newx <span style="color:#f92672">&gt;=</span> xadjust<span style="color:#f92672">.</span>lower) <span style="color:#f92672">and</span> \
</span></span><span style="display:flex;"><span>               (newx <span style="color:#f92672">&lt;=</span> (xadjust<span style="color:#f92672">.</span>upper <span style="color:#f92672">-</span> xadjust<span style="color:#f92672">.</span>page_size)):
</span></span><span style="display:flex;"><span>            xadjust<span style="color:#f92672">.</span>value <span style="color:#f92672">=</span> newx
</span></span><span style="display:flex;"><span>            vport<span style="color:#f92672">.</span>set_hadjustment(xadjust)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (newy <span style="color:#f92672">&gt;=</span> yadjust<span style="color:#f92672">.</span>lower) <span style="color:#f92672">and</span> \
</span></span><span style="display:flex;"><span>               (newy <span style="color:#f92672">&lt;=</span> (yadjust<span style="color:#f92672">.</span>upper <span style="color:#f92672">-</span> yadjust<span style="color:#f92672">.</span>page_size)):
</span></span><span style="display:flex;"><span>            yadjust<span style="color:#f92672">.</span>value <span style="color:#f92672">=</span> newy
</span></span><span style="display:flex;"><span>            vport<span style="color:#f92672">.</span>set_vadjustment(yadjust)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">on_key_press</span>(self, widget, event):
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;&#34;&#34; Callback to handle the keys pressed in the main window
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            Callback que maneja las teclas que se presionan en la ventana
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>        keycode <span style="color:#f92672">=</span> gtk<span style="color:#f92672">.</span>gdk<span style="color:#f92672">.</span>keyval_to_upper(event<span style="color:#f92672">.</span>keyval)
</span></span><span style="display:flex;"><span>        newx <span style="color:#f92672">=</span> newy <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> keycode <span style="color:#f92672">in</span> MOVE_KEYS<span style="color:#f92672">.</span>keys():
</span></span><span style="display:flex;"><span>            offset_x, offset_y <span style="color:#f92672">=</span> MOVE_KEYS[keycode]
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>_move_image(offset_x, offset_y)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">elif</span> keycode <span style="color:#f92672">in</span> ZOOM_KEYS<span style="color:#f92672">.</span>keys():
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>_update_image(ZOOM_KEYS[keycode])
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> False
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> True <span style="color:#75715e"># Con True cancelo el evento</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">on_mouse_moved</span>(self, widget, event):
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;&#34;&#34; Callback to the mouse movement inside the viewport
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            Callback que es llamado cuando el mouse se mueve en el viewport
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Ver: http://www.pygtk.org/pygtk2tutorial-es/sec-EventHandling.html</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> event<span style="color:#f92672">.</span>is_hint:
</span></span><span style="display:flex;"><span>            x, y, state <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>window<span style="color:#f92672">.</span>get_pointer()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            state <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>state
</span></span><span style="display:flex;"><span>        x, y <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>x_root, event<span style="color:#f92672">.</span>y_root
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> state <span style="color:#f92672">&amp;</span> gtk<span style="color:#f92672">.</span>gdk<span style="color:#f92672">.</span>BUTTON1_MASK:
</span></span><span style="display:flex;"><span>            offset_x <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>prevmousex <span style="color:#f92672">-</span> x
</span></span><span style="display:flex;"><span>            offset_y <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>prevmousey <span style="color:#f92672">-</span> y
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>_move_image(offset_x, offset_y)
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>prevmousex <span style="color:#f92672">=</span> x
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>prevmousey <span style="color:#f92672">=</span> y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">on_button_pressed</span>(self, widget, event):
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;&#34;&#34; When the user presses the left mouse button, save the x and y pixel positions,
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            and change the cursor.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            Cuando el usuario presiona el botón izquierdo, guardo los puntos x, y de
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            origen del evento y cambio el cursor a &#34;moviéndose&#34;.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> event<span style="color:#f92672">.</span>button <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>change_vport_cursor(gtk<span style="color:#f92672">.</span>gdk<span style="color:#f92672">.</span>Cursor(gtk<span style="color:#f92672">.</span>gdk<span style="color:#f92672">.</span>FLEUR))
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>prevmousex <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>x_root
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>prevmousey <span style="color:#f92672">=</span> event<span style="color:#f92672">.</span>y_root
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> True
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">on_button_released</span>(self, widget, event):
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;&#34;&#34; When the user releases the left mouse button, set the normal cursor.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">            Cuando el usuario suelta el botón izquierdo, vuelvo el cursor al normal &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> event<span style="color:#f92672">.</span>button <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>            self<span style="color:#f92672">.</span>change_vport_cursor(None)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> True
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">change_vport_cursor</span>(self, type):
</span></span><span style="display:flex;"><span>        self<span style="color:#f92672">.</span>viewport<span style="color:#f92672">.</span>window<span style="color:#f92672">.</span>set_cursor(type)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">close_application</span>(self, widget, event, data<span style="color:#f92672">=</span>None):
</span></span><span style="display:flex;"><span>        gtk<span style="color:#f92672">.</span>main_quit()
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> False
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(sys<span style="color:#f92672">.</span>argv) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">and</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>exists(sys<span style="color:#f92672">.</span>argv[<span style="color:#ae81ff">1</span>]):
</span></span><span style="display:flex;"><span>        image_file <span style="color:#f92672">=</span> sys<span style="color:#f92672">.</span>argv[<span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        image_file <span style="color:#f92672">=</span> DEFAULT_IMAGE
</span></span><span style="display:flex;"><span>    SimpleImageViewer(image_file)
</span></span><span style="display:flex;"><span>    gtk<span style="color:#f92672">.</span>main()
</span></span></code></pre></div><p>Queda pendiente manejar el scroll del mouse para hacer zoom (ya que GTK mueve el gtk.Scrollwindow que contiene la imagen por defecto). Si bien funciona copiando y pegando esto en un archivo, también pueden descargar el ejemplo <a href="http://www.marcelofernandez.info/files/image_viewer.py">desde acá</a>.</p>
<p>Espero que le sirva a alguien. :-)</p>
<p><strong>Actualización</strong>: ¡Gracias StyXman por <a href="http://grulicueva.homelinux.net/~mdione/glob/posts/our-man-in-toulon/">la comparativa con PyQT</a>! Ahí agregué la licencia y sobre el código&hellip; bueno, sólo agregar que es un ejemplo, la idea era hacer el código verborrágico apropósito. Por otra parte, y como conclusión personal, veo que QT tiene una clase <a href="http://doc.trolltech.com/4.2/qgraphicsview.html">QGraphicsView</a> que maneja solito el tema del arrastrar y mover la imagen (eso lleva unas cuantas líneas en GTK). :-)</p>
<p>Saludos</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>

<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Visor de Imágenes Simple con PyGTK on x"
            href="https://x.com/intent/tweet/?text=Visor%20de%20Im%c3%a1genes%20Simple%20con%20PyGTK&amp;url=http%3a%2f%2flocalhost%3a1313%2f2009%2f11%2fvisor-de-imagenes-simple-con-pygtk%2f&amp;hashtags=">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Visor de Imágenes Simple con PyGTK on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2f2009%2f11%2fvisor-de-imagenes-simple-con-pygtk%2f&amp;title=Visor%20de%20Im%c3%a1genes%20Simple%20con%20PyGTK&amp;summary=Visor%20de%20Im%c3%a1genes%20Simple%20con%20PyGTK&amp;source=http%3a%2f%2flocalhost%3a1313%2f2009%2f11%2fvisor-de-imagenes-simple-con-pygtk%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Visor de Imágenes Simple con PyGTK on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2f2009%2f11%2fvisor-de-imagenes-simple-con-pygtk%2f&title=Visor%20de%20Im%c3%a1genes%20Simple%20con%20PyGTK">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Visor de Imágenes Simple con PyGTK on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2f2009%2f11%2fvisor-de-imagenes-simple-con-pygtk%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Visor de Imágenes Simple con PyGTK on whatsapp"
            href="https://api.whatsapp.com/send?text=Visor%20de%20Im%c3%a1genes%20Simple%20con%20PyGTK%20-%20http%3a%2f%2flocalhost%3a1313%2f2009%2f11%2fvisor-de-imagenes-simple-con-pygtk%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Visor de Imágenes Simple con PyGTK on telegram"
            href="https://telegram.me/share/url?text=Visor%20de%20Im%c3%a1genes%20Simple%20con%20PyGTK&amp;url=http%3a%2f%2flocalhost%3a1313%2f2009%2f11%2fvisor-de-imagenes-simple-con-pygtk%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Visor de Imágenes Simple con PyGTK on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Visor%20de%20Im%c3%a1genes%20Simple%20con%20PyGTK&u=http%3a%2f%2flocalhost%3a1313%2f2009%2f11%2fvisor-de-imagenes-simple-con-pygtk%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
